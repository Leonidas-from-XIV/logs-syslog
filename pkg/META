description = "Emit logs via syslog"
version = "%%VERSION_NUM%%"
requires = "logs syslog-message"
archive(byte) = "logs-syslog.cma"
archive(native) = "logs-syslog.cmxa"
plugin(byte) = "logs-syslog.cma"
plugin(native) = "logs-syslog.cmxs"
exists_if = "logs-syslog.cma"

package "unix" (
  description = "Unix syslog reporter"
  version = "%%VERSION_NUM%%"
  requires = "logs-syslog logs syslog-message ptime.clock.os ipaddr"
  archive(byte) = "logs-syslog-unix.cma"
  archive(native) = "logs-syslog-unix.cmxa"
  plugin(byte) = "logs-syslog-unix.cma"
  plugin(native) = "logs-syslog-unix.cmxs"
  exists_if = "logs-syslog-unix.cma"
)

package "lwt" (
  description = "Lwt syslog reporter"
  version = "%%VERSION_NUM%%"
  requires = "logs-syslog logs syslog-message ptime.clock.os ipaddr lwt x509 tls tls.lwt cstruct"
  archive(byte) = "logs-syslog-lwt.cma"
  archive(native) = "logs-syslog-lwt.cmxa"
  plugin(byte) = "logs-syslog-lwt.cma"
  plugin(native) = "logs-syslog-lwt.cmxs"
  exists_if = "logs-syslog-lwt.cma"
)

package "mirage" (
  description = "Mirage syslog reporter"
  version = "%%VERSION_NUM%%"
  requires = "logs-syslog logs syslog-message ipaddr lwt mirage-types cstruct"
  archive(byte) = "logs-syslog-mirage.cma"
  archive(native) = "logs-syslog-mirage.cmxa"
  plugin(byte) = "logs-syslog-mirage.cma"
  plugin(native) = "logs-syslog-mirage.cmxs"
  exists_if = "logs-syslog-mirage.cma"
)
